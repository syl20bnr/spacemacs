#### Config generator for CircleCI.
version: 2.1
setup: true
orbs:
  continuation: circleci/continuation@0.1.0
jobs:
  "Generate config":
    executor: continuation/default
    steps:
      - checkout
      - run: 
          name: "Render config_tmpl.yml"
          command: |
            cd .circleci/
            cp config_tmpl.yml circleci.yml
            sed -i "s/{{ IS_BRANCH_UDATE }}/${IS_BRANCH_UPDATE}/g" circleci.yml
      - continuation/continue:
          parameters: '{}'
          configuration_path: ".circleci/circleci.yml"
  "will it work - who knows":
    executor: continuation/default
    steps:
      - checkout
      - run: 
          name: "Testing"
          command: |
            echo "beeeeeep booooooop"

workflows:
  setup-workflow:
    jobs:
      - "Generate config"
  testing-cron-in-setup-config:
    triggers:
      - schedule:
          cron: "0,5,10,15,20,25,30,35,40,45,50,55 * * * *"
          filters:
            branches:
              only:
                - develop
    jobs:
      - "will it work - who knows"
